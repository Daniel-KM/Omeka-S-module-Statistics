<?php
/**
 * @var \Laminas\View\Renderer\PhpRenderer $this
 * @var \Stats\Api\Representation\StatRepresentation $stat
 * @var string $userStatus
 * @var string $type
 *
 * @todo Add the basePath to the hit url.
 */

$plugins = $this->getHelperPluginManager();
$escape = $plugins->get('escapeHtml');
$translate = $plugins->get('translate');
$escapeAttr = $plugins->get('escapeHtmlAttr');

?>

<div class="stats-stat">
    <p><?php
    if ($type === 'download'):
        if (empty($stat)):
            echo $translate('No download');
        else:
            echo sprintf($translate('%s (%s downloads): %s [%s]'),
                '<span class="stats-position">' . $stat->position($userStatus) . '</span>',
                '<span class="stats-hits">' . $stat->totalHits($userStatus) . '</span>',
                '<a href="' . $escapeAttr($stat->hitUrl()) . '"><span class="stats-url">' . $escape($stat->hitUrl()) . '</span></a>',
                '<span class="stats-resource-type">' . $escape($stat->getHumanResourceType($translate('No specific resource'))) . '</span>'
            );
        endif;
    else:
        if (empty($stat)):
            echo $translate('No view');
        else:
            echo sprintf($translate('%s (%s views): %s [%s]'),
                '<span class="stats-position">' . $stat->position($userStatus) . '</span>',
                '<span class="stats-hits">' . $stat->totalHits($userStatus) . '</span>',
                '<a href="' . $escapeAttr($stat->hitUrl()) . '"><span class="stats-url">' . $escape($stat->hitUrl()) . '</span></a>',
                '<span class="stats-resource-type">' . $escape($stat->getHumanResourceType($translate('No specific resource'))) . '</span>'
            );
        endif;
    endif;
    ?></p>
</div>
